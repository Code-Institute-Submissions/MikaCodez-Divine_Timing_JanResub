# Divine Timing
Divine Timing is an Eccommerce store that specialises in handcrafted digital watches and traditional watches.

![responsive page](https://user-images.githubusercontent.com/65243328/184502312-b607df79-aee3-44f3-b988-e257eb320d37.JPG)

[Deployed site here](https://divinetiming.herokuapp.com/)


## UX
### Users
The user should be able to interact with the website freely and be able to visit the product pages of the site including watches, glasses, watch straps etc. They will be able to also Sign up and login with an authenticated account that allows them to interact with their previous orders on their account etc.

### Admins
The Admins should be able to manage the accounts of the users registered to the site, and freely able to use product management to alter and delete products at will.

### Agile Methodology

Agile Methodology was used via Github Projects Kanban board in order to create user stories and execute them as issues in a sprint fashion.

### User Stories
| iD | Story | Resolution |
| --- | --- | --- |
| #1 | Account registration | Admin App |
| #2 | View a list of products | Web App |
| #3 | View individual product details | products Section |
| #4 | Able to identify different sectors of the site, Deals, clearance, offers etc. | Booking Section |
| #5 | Register for an account | Web App |
| #6 | Easy to login or logout | Web App |
| #7 | Enabled to password reset if lost account details  | Web App |
| #8 | Receive an email confirmation after registering  | Web App |
| #9 | Able to view purchases any time | Checkout App |
| #10 | Able to post comments on individual products | Web App |
| #11 | Able to sort and search products  | Web App |
| #12 | Sort a specific category or product  | Web App |
| #13 | Search for a product by name or description  | Web App |
| #14 | View order history  | Checkout App |
| #15 | Remove or add items to cart/bag  | bag App |
| #16 | Easily able to enter Payment information  | Web App |
| #17 | Assured that payment information is safe and secure  | Web App |
| #19 | Receive an email confirmation after checking out  | Web App |
| #20 | Add a product  | Admin App |
| #21 | Edit/update a product | Admin App |
| #22 | Delete a product  | Admin App |

![Kanban Board](https://user-images.githubusercontent.com/65243328/184502572-72f29e53-1d57-442c-a0d9-1308e92fc290.JPG)

[For A view of Issues please click here](https://github.com/MikaCodez/Divine_Timing/issues?q=is%3Aissue+is%3Aclosed)

## Database
This database scheme was created with [DBDiagram](https://dbdiagram.io/home) The Diagram shows the flow and relationship between different models.
![divineecomedbdiagram](https://user-images.githubusercontent.com/65243328/188864845-2174b2c1-fc86-45dd-9ac4-4b4ce0d46d3b.png)


## FlowChart
This is a flowchart to also display the B2C relationship flow to customers. This was generated in Figma.

![flowchart](https://user-images.githubusercontent.com/65243328/188864787-b944f4be-638c-489f-a7d3-5fd456861b95.JPG)

### Purpose
The Application is designed as an ecommerce Watch and Jewellery store to attract users and purchase the products online via the store.
They will be sent the luxury items to their address once purchased.

### Wireframes

Wireframes were designed in Balsamiq with a rough concept in mind.
Each page's wireframes include mobile(small screen) & desktop(large screens).

For Full Wireframes Document [Click Here](https://github.com/MikaCodez/Divine_Timing/blob/main/Divinetiming%20Wireframes.pdf)
![homepageproductpage](https://user-images.githubusercontent.com/65243328/185651897-a49cd24d-c6f6-4cbd-bdfd-b0b81d48eea1.JPG)
![homemobile](https://user-images.githubusercontent.com/65243328/185651927-d3b44df9-3881-4608-8b0b-9129f07b74cc.JPG)

For Full Wireframes Document [Click Here](https://github.com/MikaCodez/Divine_Timing/blob/main/Divinetiming%20Wireframes.pdf)
 
### Colours


![divinetiming](https://user-images.githubusercontent.com/65243328/184502587-e0d671b3-d77c-4e0a-98d1-0fbda6783322.png)


#000000 Black used for the main grid lines of the site. To give the clean aesthetic.


#BC2B3F Cardinal for the featured sections of the site


#0E0D0F Rich Black Fogra for the some of the products on the site


#F93D5C Radical red for text on some of the main sections of the site i.e. logo and products.



## Features
Home Page

The home page has an attractive layout that is bright and inviting. It also hosts a review section of previous customers and additional information on the features of the digital watches. The page has a Navigation bar that links to other sections of the site and buttons on the page that link straight to the profile and orders of the customer. If the user is not a registered user and not logged in. The navbar has a login/register option and the button to take the user to the login page.

![divin1](https://user-images.githubusercontent.com/65243328/184503091-c1ba9f57-1e34-4c04-9f55-e1473179f33b.JPG)
![divin2](https://user-images.githubusercontent.com/65243328/184503098-ed260371-6b5a-4d6b-95a4-51714281714c.JPG)


Product Page

The product Page is a simple page that is not distracting for the user and catches their eye right away with a list of various products users can buy.
Ranging from watches, to glasses and watch straps.

![products1](https://user-images.githubusercontent.com/65243328/184503147-b549f2e3-d8e7-42bb-8cb7-91a0902a154d.JPG)
![products2](https://user-images.githubusercontent.com/65243328/184503156-ebb231a2-5a85-472c-b650-c50c7b560018.JPG)

Products comment page

The Product comment page is an additional page to the individual products page that allows users to comment and leave reviews on products previously bought.
![addcomment](https://user-images.githubusercontent.com/65243328/188865399-d75b9645-e16e-41b6-b19c-c4bc432fd6a4.JPG)


Profile Page

The Profile page will contain the details of the user that is logged in and a list of all their previous purchases and order history.

![prof1](https://user-images.githubusercontent.com/65243328/184503298-9f10dcbc-8357-4ae9-acd4-962558c1966c.JPG)


Login Page / Sign up Page

Allowing new users to sign up to the site to purchase products and existing users to log back in and purchase more or check their order history.

![signup1](https://user-images.githubusercontent.com/65243328/184503345-51ff929e-5b9a-4f99-a2b7-c6574fa5170b.JPG)
![signup2](https://user-images.githubusercontent.com/65243328/184503353-6264c334-1ece-41e7-af6b-8f90fd1567df.JPG)


Manage Products page

Allowing Admins to add/edit/delete products as they see fit.

![prodmanage1](https://user-images.githubusercontent.com/65243328/184503537-d0fa30d1-347e-466c-b6d3-fb1ebe14db46.JPG)

![prodmanage2](https://user-images.githubusercontent.com/65243328/184503543-0320b9ed-02fb-4349-8341-d7ed8090c69b.JPG)

Newsletter

A pop-up notification is sent back to users once they are subscibed to the newsletter and to
receive monthly newsletters from the Divine Timing team regarding products, promotions and news.

![newslet](https://user-images.githubusercontent.com/65243328/190248755-79b2fd43-c5fa-411b-bd6b-3730ad5f9351.JPG)

## Future Features
Only future features left to implement at the moment is to have Wishlist functioning at a high level, as it is currently not rendering to the page but it is registering wishlist orders to the database.


## SEO and Web marketing
various SEO techniques were put in place to help make the searches of the site much better with implementation of meta tags throughout the pages. 
Adding a sitemap.xml and robots.txt file as well to be submitted to google for better quality search engine optimisation.

I have also included a facebook page which links to the site. Users can take part in the social aspect of the site and stay updated on the page, as well as the facebook page linking directly to the site for users to be able to purchase.

[Facebook page here](https://www.facebook.com/Divine-Timing-101174169382750)


![facebook page 1](https://user-images.githubusercontent.com/65243328/184504311-6f0135e0-4746-442c-a437-c4f1a293d01e.JPG)
![facebook page 2](https://user-images.githubusercontent.com/65243328/184504315-3c347253-76a8-444d-8285-7c3fbddcfa30.JPG)
![facebook page 3](https://user-images.githubusercontent.com/65243328/184504349-79990ec1-cb55-49de-8750-83f6aa0aedf5.JPG)




## Testing
[Link to TESTING.MD here:](https://github.com/MikaCodez/Divine_Timing/blob/main/Testing.md)


## Deployment
The site was deployed to Heroku. 
The below steps were carried out to deploy.

The Following Accounts will also be needed in order to continue:

An email account of your choice. I used gmail

[Stripe for payments](https://stripe.com/)

[AWS for the S3 bucket](https://aws.amazon.com/)


### Creating AWS for S3

Go to Amazon Web Services page and login or register

•You should be redirected to AWS Management Console, if not click onto AWS logo in top left corner or click Services icon and choose Console Home

•Below the header AWS Services click into All Services and find S3 under Storage

•Create New Bucket using Create Bucket button in top right hand corner

•Configuration: type in your chosen name for the bucket (preferably matching your heroku app name) and AWS Region closest to you

Object ownership: ACLs enabled, Bucket owner preferred

•Block Public Access settings: Uncheck to allow public access, Acknowledge that the current settings will result that the objects within the bucket will become public

•Click Create Bucket

You are redirected to Amazon S3 with a list of your buckets. Click into the name of the bucket you just created

•Find the tab Properties on the top of the page: Static website hosting at the bottom of the properties page: click to edit, click enable, fill in index document: index.html and error.html for error

On the Permissions tab:

Cross-origin resource sharing (CORS) Paste in the below code as configuration and save.


![s3aws](https://user-images.githubusercontent.com/65243328/190393189-4f960d87-fe8a-4193-b562-b105e1d940e1.JPG)

Bucket Policy within permissions tab: Edit bucket policy Click AWS Policy Generator (top right corner)

Select type of policy: S3 Bucket policy Principal: * (Allows all) Actions: Get object Amazon Resource Name (ARN): paste from the Edit bucket policy page in permissions Click Add statement Then Click Generate Policy and Copy the policy into bucket policy editor. In the policy code find "Resource" key and add "/*" after the name of the bucket to enable all Save changes

•Access control list (ACL) within permissions tab: click Edit
find Everyone (public access) and check List box and save

•Identity and Access Management (IAM) Go back to the AWS Management Console and find IAM in AWS Services
side menu - User Groups and click Create Group name group "manage-your-app-name" and click Create group

side menu - Policies and click Create Policy Click import managed policy - find AmazonS3FullAccess Copy ARN again and paste into "Resource" add list containing two elements "[ "arn::..", ""arn::../*]" First element is for bucket itself, second element is for all files and folders in the bucket

Click bottom right Add Tags, than Click bottom right Next: Review Add name of the policy and description

Click bottom right Create policy

•Attach policy to the group we created:
•go to User Groups on side menu
•select your group from the list
go to permissions tab and add permissions drop down and choose Attach policies
•find the policy created above and click button in bottom right Add permissions
•Create User to go in the group
•Users in the side menu and click add users

User name: your-app-staticfiles-user Check option: Access key - Programmatic access Click button at the bottom right for Next

Add user group and add user to the group you created earlier Click Next Tags and Next: review and Create user
•Download .csv file
•Connect django to AWS S3 bucket
•install boto3
•install django-storages
•freeze to requirements.txt
•add storages to installed apps in settings.py

![awsbucket](https://user-images.githubusercontent.com/65243328/190394148-ae4fd034-9fbe-48a7-9110-c1c00af706ba.JPG)

•Go to heroku to set up environment variables
open CSV file downloaded earlier and copy each variable into heroku Settings

AWS_STORAGE_BUCKET_NAME AWS_ACCESS_KEY_ID from csv AWS_SECRET_ACCESS_KEY from csv USE_AWS = True remove DISABLE_COLLECTSTATIC variable from heroku

•Create file in root directory custom_storages.py

![awsbucket2](https://user-images.githubusercontent.com/65243328/190394576-ac231e2b-37dd-47ad-9ac8-1dc983db6311.JPG)

•Go to settings.py, add the following AWS settings

![image](https://user-images.githubusercontent.com/65243328/190394672-b3090d4e-0f98-4ff8-91d9-be8d6d4b5b78.png)

To upload the media files to S3 bucket
•Go to your S3 bucket page on AWS. Create new folder "media"
•go to the media folder and click Upload

![image](https://user-images.githubusercontent.com/65243328/190395189-3ad1fe90-ebce-45b2-8040-2748c8c6e23e.png)


### Steps to Deployment

You can clone this repository directly into you editor by pasting the following command into the terminal: https://github.com/MikaCodez/Divine_Timing
Or you can save a copy of this directory by clicking the green button " Clone or download" then "Download Zip" and after that extract the Zip file to your folder, change the directory to the directory file location you just created.
For this project I stored all Stripe secret keys in both Heroku settings and Gitpod settings. That way I could still use them for development and production.
In settings.py you can set your variables like in the example below

import os

SECRET_KEY = os.environ.get(your secret key)
DEBUG = 'DEVELOPMENT' in os.environ
STRIPE_PUBLIC_KEY = os.getenv(your secret key
STRIPE_SECRET_KEY = os.getenv(your secret key)
STRIPE_WH_SECRET = os.getenv(your secret key)
For more info on how to set up the Stripe keys visit Stripe key.

•Install all requirements from the requirements.txt file putting this command into your terminal:
pip3 install -r requirements.txt

•In the terminal in your IDE migrate the models to create a database using the following commands:
python3 manage.py makemigrations
python3 manage.py migrate

•Load the data fixture (Categories, Specials, Products) in that order using the following command in the terminal
python3 manage.py loaddata <fixture name>
  
•Create a superuser, it will allow you to have access to the admin panel. you need a username, an email, a password. Note the password won't display in the terminal but will be registered.
 
python3 manage.py createsuperuser
  
•You can now run the the application using the following command in the terminal:
python3 manage.py runserver
  
•To access the admin panel add /admin in the url and enter the details for the superuser you created.
  
Heroku Deployment

In order for Heroku to work properly, the local deployment steps are required. You will also need to have installed gunicorn, dj-database-url and psycopg. All of those are already in the project requirements.txt, but for future projects they are essentials for Heroku to function properly.

•Create a requirements.txt file, which will contains the list of dependencies, using the following command in the terminal:
pip3 freeze > requirements.txt
  
•Create a Procfile and inside it type: 
web: gunicorn divine_timing.wsgi:application
  
On Heroku website you can now create your new app, assign a unique name(try to use a name as close as possible to the project name for consistency), choose the region the closest to you and click Create app.(In my case it was Europe)

![heroku11](https://user-images.githubusercontent.com/65243328/190389567-ebce4882-a574-4f9b-a992-0ec18705c5d7.JPG)

  
Go to Resources tab in Heroku, then in the Add-ons search bar look for Heroku Postgres, select Hobby Dev — Free and click Provision* button to add it to your project. (This is where dj-database-url and Psycopg are required.)

![image](https://user-images.githubusercontent.com/65243328/190396481-3b566dd9-e87a-45a7-9301-286b37750b3c.png)  
  
In the Heroku settings click on Reveal Config Vars and set the following variables.
  
![config-vars](https://user-images.githubusercontent.com/65243328/190388957-e82e160c-3632-4f20-80db-445f33fff214.png)
  
![image](https://user-images.githubusercontent.com/65243328/190397249-ce5fd201-c52d-4bc7-91d1-9fbef0003e74.png)


Copy DATABASE_URL's value(Postgres database URL) from the Config Vars and temporarily paste it into the default database in settings.py. 
You can temporary comment out the current database settings code and just paste the following in settings.py:
  

![djdatabase](https://user-images.githubusercontent.com/65243328/190389874-781386d1-87e6-4537-9ac5-4f7ae5225ca4.png)

Also make sure to remember your Stripe keys are set in settings.py
 
![image](https://user-images.githubusercontent.com/65243328/190395575-436cbeac-d1d7-445e-b046-f2d440191ad3.png)


  
This is just a temporary setup that allows us to make all the migrations required for our data in our DB to be transferred to Heroku POstgres. You shouldn't commit and push at this stage for security reasons.

Here you can now follow the exact steps, as explained in local deployment.

You can remove the POstgres URL from your settings and uncomment the default DATABASE code from your settings.

Add your heroku app url to ALLOWED_HOST in the settings file and also include local host.

ALLOWED_HOSTS = ['your heroku app name here', 'localhost']
You can now connect Heroku to Github to automatically deploy each time you push to Github. In Heroku Dashboards select
Deploy -> Deployment method -> Github
link your Github repo name to Heroku
Click Enable automatic Deployment

![herokugit](https://user-images.githubusercontent.com/65243328/190390292-1f8217cb-f025-4892-b588-58fbb5498bbd.JPG)


Now you run git push in the terminal, it will push to Github and Heroku.
After your app has been successfully deployed you can view you project by clicking on open app


## Technologies Used
Python All packages used can be found in the [requirements.txt](https://github.com/MikaCodez/Divine_Timing/blob/main/requirements.txt) File.

HTML - Used for the template structures.

CSS - Used to style the markup.

Javascript - Custom use minimal, to set a timeout on bootstrap messages.

GitHub - to store the overall project repository.

GitPod - used as a workspace to do the coding.

Django - django frameworks to manage apps.

Figma - To design the wireframe of the complete project.

Google Fonts - to brandize 'Harmonic Poems' with google fonts. Used for logo and all the written content.

Fontawesome - fontawesome icons for social media links and as additional design.

Bootstrap - grid, layout, columns, cards and forms structure.

Heroku - for the deployment of the project.

Coolors - to choose the colour palette and colour shades.

PostgreSQL - database storage of the models.

AWS - image and static files storage.

AmIResponsive - responsiveness of the site.

Lighthouse - used for testing site functionality.

PEP8 - used for Python files testing.

W3C Markup Validation Service - used for HTML testing.

W3C CSS Validation Service - used for CSS testing

## Resources

Code Institute's Slack Community.

Code Institute's Codestar Django Blog was used in the beginning stages of the development of this project.

Code Institute's Boutique Ado app was used as a base for the products and navigation

Django Documentation - Heavy Reliance on Django documentation to implement forms, models, views etc.

W3Schools documentation for CSS

Bootstrap Documentation - For implementing Bootstrap styles across project

Google

Stack overflow

Youtube - Also Heavy Reliance on youtube tutorials from Codemy.com especially when it came to views and models in py


## Credits

SCOPE code credits to Code Institute, Boutique Ado Walkthrough Project. HTML template credit to Nikhil. I have amended the code to my Ecommerce sites specification.

Credits also due to Code Institute staff for helping especially Tutor Support.

Images for Reviews taken from [Unsplash.](https://unsplash.com/)

Images taken for products from various watch stores: [Rolex](https://www.rolex.com/en-us), [Jomashop](https://www.jomashop.com/), [sunglasseshut](http://sunglasseshut.com/), [strapsco](https://strapsco.com/), [monkey glasses](https://www.monkeyglasses.com/)
